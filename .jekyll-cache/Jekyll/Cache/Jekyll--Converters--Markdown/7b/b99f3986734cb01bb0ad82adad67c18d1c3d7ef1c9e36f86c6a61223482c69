I"c<p>Email is going to be used to activate an account, and I’m leaning towards using the Pony gem to simplify the creations and sending.</p>

<p>Here’s how simple Pony is:</p>

<pre lang="ruby" line="1">
Pony.mail(:to =&gt; 'test@example.com', :from=&gt;'test@example.com', :subject=&gt;'spam', :body=&gt;(erb :registration_email))
</pre>

<p>and here’s how you can test it with the <strong>pony-test</strong> gem:</p>

<pre lang="ruby" line="1">
  def test_valid_new_user_signup_should_create_email
    count=all_email.count
    create_user
    assert_equal count+1, all_email.count
  end

  def test_signup_email_should_contain_activation_link
    create_user
    assert_match /http\:\/\//, current_email.body
  end
</pre>

<p>Don’t forget to nclude the Pony test helpers in your test class…</p>

<pre lang="ruby" line="1">
include Pony::TestHelpers
</pre>
:ET
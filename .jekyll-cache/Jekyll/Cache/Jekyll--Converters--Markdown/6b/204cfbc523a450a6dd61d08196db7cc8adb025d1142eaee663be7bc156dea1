I"÷<p>I should have done this earlier. To do a number of tests, I have to repeat the same actions like create a user, log a user in, etc. I was putting these actions at the top of each test file, but have wised up and moved them to the <code>test_helper.rb</code> file. Hereâ€™s how that looks now:</p>

<pre lang="ruby" line="1">
module Test::Unit
  class TestCase
    ...
    
    def create_user(user_hash={})
      post '/user/signup', {:user=&gt;{:username=&gt;"testuser",:email=&gt;"test@test.com",:password=&gt;"pass1",:password_confirmation=&gt;"pass1"}.merge(user_hash)}
    end
    
    def login(user_hash={})
      post "/user/login", :user=&gt;{:username_or_email=&gt;'testuser',:password=&gt;'pass1'}.merge(user_hash)
    end
    
  end
end
</pre>
:ET
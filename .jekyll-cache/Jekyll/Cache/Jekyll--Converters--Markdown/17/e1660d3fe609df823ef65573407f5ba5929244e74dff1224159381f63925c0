I"ž<p>I first thought that I would have to use ERB to render non-HTML-like templates. Not true. Haml let you do a <code>:plain</code> filter which is pretty much the same as using ERB templates.</p>

<p>Hereâ€™s a simple example haml template for email:</p>

<pre lang="haml" line="1">
:plain
  Welcome #{@user.username} to Fund-A-Stache! 

  click the following link to activate your account:

  #{activation_link(@user)}
</pre>

<p>Iâ€™m also using Google SMTP for email. That way I can send email from my home (which blocks SMTP traffic). This may change, but just so I can remember why Iâ€™m doing this, hereâ€™s the Pony call:</p>

<pre lang="ruby" line="1">
Pony.mail(
  :to=&gt;@user.email, 
  :from=&gt;'user@example.org', 
  :subject=&gt;'Welcome', 
  :body=&gt;(haml :registration_email, :layout=&gt;false),
  :content_type=&gt;'text/html',
  :via=&gt;:smtp,
  :smtp=&gt;{
    :host=&gt;'smtp.gmail.com',
    :port=&gt;'587',
    :tls=&gt;true,
    :user=&gt;'user@example.org',
    :password=&gt;'secret',
    :auth=&gt;:plain, # :plain, :login, :cram_md5, no auth by default
    :domain=&gt;"example.org" # the HELO domain provided by the client to the server
  }
)
</pre>
:ET